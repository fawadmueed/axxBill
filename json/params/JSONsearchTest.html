<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


    <script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

    <style type="text/css">
      h1{
        text-align: center;
      }

    </style>

  </head>


  <body>


  <div class="container">

    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
          <a class="navbar-brand" href="#">Fad!!</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link" href="#">Search</a>
            <a class="nav-item nav-link" href="#">AxxiuM</a>
            <a class="nav-item nav-link disabled" href="#">Disabled</a>
          </div>
        </div>
    </nav>
  <br>
    <h1>Just SearCH ! </h1><br><br>
    <div class="input-group">
  
      <input type="text" class="form-control" placeholder="InputText" aria-label="Username" aria-describedby="basic-addon1" id="search1">
      <button type="button" id="button" class="btn btn-success">GOo!</button>
    </div>

    <table class="table table-striped" id="table1">
  <thead>
    <tr>
      
      <th>ID</th>
      <th>Prix ($)</th>
      <th>Ramq ($)</th>
      <th>Insurance ($)</th>
      <th>Special ($)</th>
      <th>Modify</th>
    </tr>
  </thead>
  <tbody>
    
  </tbody>
</table>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
      <p> <b > Change Prix for Code: </b><b id="keyHeader">  </b> </p>
        
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="updatePrixModal"> </div> 
        <b>Ramq ($)     </b>  <input type="text" name="Ramq" placeholder="($)" id="modalRamqPrix"> <br>
        <b>Insurance ($)</b> <input type="text" name="Ramq" placeholder="($) " id="modalInsurancePrix"> <br>
        <b>Special ($)  </b><input type="text" name="Ramq" placeholder="($) " id="modalSpecialPrix"> <br>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick="updateJsonCode()">UpdateSave changes</button>
      </div>
    </div>
  </div>
</div>
    

    <script type="text/javascript">

     $("#search1").keydown(function(){
     var output; 

      $.getJSON("codeFawad.json",function(data){

      var search1= $('#search1').val();
      var reg=new RegExp(search1,'i');

        $.each(data,function(key,val){
          
          if(key.search(reg) != -1)
          {

          output+="<tr>";
          output+="<td id=" + key + ">" +key+"</td>";
          output+="<td id=" + key + ">" +val.prix+"</td>";
          output+="<td id=" + key + ">" +val.ramq+"</td>";
          output+="<td id=" + key + ">" +val.insurance+"</td>";
          output+="<td id=" + key + ">" +val.special+"</td>";
          output+="<td> <button class='btn btn-success btn-small' data-toggle='modal' data-target='#exampleModal' onclick=$('#keyHeader').html("+key+");>Edit</button> </td>";
          output+="</tr>";

          //console.log(key);
        }
        });


        $('tbody').html(output);

      });
    });

     function updateJsonCode(){
      
      var keyCode=$('#keyHeader').text();
      var prixToChangeRamq=$('#modalRamqPrix').val();
      var prixToChangeInsurance=$('modalInsurancePrix').val();
      var prixToChangeSpecial=$('modalSpecialPrix').val();
      

      $.getJSON("codeFawad.json",function(data){

        $.each(data,function(key,val) {

          if(key==keyCode){
            alert('Key Found in JSON');
            alert('B4 Key.prix is' +val.prix);
            val.prix=10101010;
            JSON.stringify(101010[ val.prix]);
             alert('Update DONE!');
             return false;
             alert('after val.prix is' +val.prix);


          }



        });

      });

     };

     function modify()
     { 
      alert("modify me ");
    };


    </script>
    
  </body>
</html>